<script src='util.js'></script>
<script src='tokens.js'></script>
<script src='parser.js'></script>
<script src='encoder.js'></script>

<form name='container'>
	<textarea name='sen' cols=80 rows=10>sen</textarea>

	<br/>
	<input type='button' name='tojs' value='Sen to JS' />
	<input type='button' name='tosen' value='JSON to Sen' />
	<br/>

	<textarea name='js' cols=80 rows=10>js</textarea>
</form>
<script>
	var cont = document.container,
		sen = cont.sen,
		js = cont.js;

	cont.tojs.onclick = function () {
		try {
			js.value = JSON.stringify(parser.parse(sen.value), null, 4);
		}
		catch (e) {
			js.value = e.toString();
			throw e;
		}
	};
	cont.tosen.onclick = function () {
		sen.value = encode(JSON.parse(js.value));
	};

	//small sanity checks
	parser.parse('a');
	parser.parse('(a)');
	parser.parse('(:a b)');
</script>
